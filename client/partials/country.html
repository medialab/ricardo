<div id="sticky-marker"></div>
<div id="sticky-container">
<div class="container">
  <div class="row">
    <div class="timeline-cont col-sm-12">
      <country-title></country-title>
      <div class="legend">
        <div class="legend-item">
          <div class="square import"></div> Import
        </div>
        <div class="legend-item">
          <div class="square export"></div> Export
        </div>
        <div class="legend-item">
          <div class="line available"></div> Available data
        </div>
        <div class="legend-item">
          <div class="line unavailable"></div> Unavailable data
        </div>
        <div class="legend-item">
          Data expressed in <strong>{{actualCurrency}}</strong>
        </div>
      </div>
      <dual-timeline ng-data="timelineData" start-date="selectedMinDate" end-date="selectedMaxDate" ></dual-timeline>
    </div>
  </div>
</div>
</div>

  <div class="container">
    <div class="row" >
      <div id="countryBrushing" class="col-sm-12">
        <!-- <country-title id="alt-title" style="display:none;"></country-title> -->
        <brushing-timeline
          ng-data="timelineData"
          start-date="selectedMinDate"
          end-date="selectedMaxDate"
          raw-start-date="rawMinDate"
          raw-end-date="rawMaxDate"
          source-country="entities.sourceEntity.selected.RICname"
          target-country="entities.targetEntity.selected.RICname"
        ></brushing-timeline>
      </div>
    </div>
  </div>


<div class="container">
  <div class="row">
    <div class="col-sm-3">
      <h3 class="subtitle">choose a reporting country:</h3>
    </div>
    <div class="col-sm-9">
      <h3 class="subtitle">Trade of {{entities.sourceEntity.selected.RICname}} by partners, {{startDate}} – {{endDate}}, in <em>{{actualCurrency}}</em></h3>
    </div>
  </div>
  <div id="select-doubleChart">
    <div class="row">
      <div class="col-md-12">
        <label for="singleSelect"> Filtered by </label>
        <select class="selectFilters" name="singleSelect" ng-model="filter">
          <option value="">Select a filter</option>
          <option value="all">All</option>
          <option value="city/part_of">City</option>
          <option value="colonial_area">Colonial Area</option>
          <option value="country">Country</option>
          <option value="geographical_area">Geographical Area</option>
          <option value="group">Group</option>         
        </select>
        <label for="singleSelect"> order by </label>
        <select class="selectFilters" name="singleSelect" ng-model="order" theme="bootstrap">
          <option value="">--Select an order--</option>
          <option value="tot">total</option>
          <option value="imp">imports</option>
          <option value="exp">exports</option>
          <option value="name">name</option>       
        </select>
        <label for="singleSelect"> grouped by </label>
        <select class="selectFilters" name="singleSelect" ng-model="gbContinent">
          <option value="">--Select a group--</option>
          <option value="0">None</option>
          <option value="1">Continent</option>       
        </select>
    </div>
      <div id="partners-histogram-container" class="col-sm-12">
        <div id="partners-histogram-container" class="partners-histogram" partners-histogram></div>
      </div>
    </div>
  </div>
<!-- <div class="container"> -->
  <div class="row">
    <div class="col-sm-3">
      <h3 class="subtitle">select up to 5 partners:</h3>
    </div>
    <div class="col-sm-9">
      <h3 class="subtitle">Trade of {{entities.sourceEntity.selected.RICname}} with 
      <span ng-repeat="elm in reporting" ng-click="removeReporting(elm)" ng-style="{color:elm.color}" >{{elm.RICname}}
      <span ng-if="!$last">, </span>
      </span>, {{selectedMinDate}} – {{selectedMaxDate}}, in {{actualCurrency}}</h3>
    </div>
  </div>
  <div id="select-lineChart">
    <div class="select-dropdown col-sm-10" ng-show="RICentitiesDD.length">

      <ui-select  class="selectPartners" ng-model="entities.sourceCountryEntity.selected" theme="bootstrap">
        <match placeholder="Country...">{{$select.selected.RICname}}</match>
        <choices repeat="item in reportingCountryEntities | filter: $select.search">
          <div ng-bind-html="item.RICname | highlight: $select.search"></div>
        </choices>
      </ui-select>

      <ui-select class="selectPartners" ng-model="entities.sourceColonialEntity.selected" theme="bootstrap">
        <match placeholder="Colonial area...">{{$select.selected.RICname}}</match>
        <choices repeat="item in reportingColonialEntities | filter: $select.search">
          <div ng-bind-html="item.RICname | highlight: $select.search"></div>
        </choices>
      </ui-select>

      <ui-select class="selectPartners" ng-model="entities.sourceGeoEntity.selected" theme="bootstrap">
        <match placeholder="Geographical area...">{{$select.selected.RICname}}</match>
        <choices repeat="item in reportingGeoEntities | filter: $select.search">
          <div ng-bind-html="item.RICname | highlight: $select.search"></div>
        </choices>
      </ui-select>

      <ui-select class="selectPartners" ng-model="entities.sourceContinentEntity.selected" theme="bootstrap">
        <match placeholder="Continent...">{{$select.selected.RICname}}</match>
        <choices repeat="item in reportingContinentEntities | filter: $select.search">
          <div ng-bind-html="item.RICname | highlight: $select.search"></div>
        </choices>
      </ui-select>

      <ui-select class="selectPartners" ng-model="entities.sourceWorldEntity.selected" theme="bootstrap">
        <match placeholder="World aggregate...">{{$select.selected.RICname}}</match>
        <choices repeat="item in reportingWorldEntities | filter: $select.search">
          <div ng-bind-html="item.RICname | highlight: $select.search"></div>
        </choices>
      </ui-select>
    </div>
    <div class="col-sm-2">
      <div class="filter-group" ng-show="RICentitiesDD.length">
          <div class="btn-group pull-right">
            <label class="btn btn-sm btn-default" ng-model="yValue" btn-radio="'total'" uncheckable>total</label>
            <label class="btn btn-sm btn-default" ng-model="yValue" btn-radio="'imp'" uncheckable>imports</label>
            <label class="btn btn-sm btn-default" ng-model="yValue" btn-radio="'exp'" uncheckable>exports</label>
          </div>
      </div>
    </div>
  <div class="row">
    
    <div class="col-sm-12">
      <div  id="linechart-world"  linechart-world></div>
    </div>
    
  </div>
  <!-- <div class="row">
        <div class="col-sm-12">
          <p class="filter">selected partners:</p>
          <div list-world></div>
        </div>
      </div>
  </div> -->
</div>
<!-- <div class="container"> -->
<!--   <div class="row">
  </div>  -->
<!-- </div> -->

  <div class="row">
    <div class="col-sm-12 text-center shdt">
      <button type="button" class="btn" ng-model="viewTable" btn-checkbox btn-checkbox-true="1" btn-checkbox-false="0">
          Show/Hide data table
      </button>
      <button type="button" ng-click="download()" class="btn">
          Download data
      </button>
    </div>
  </div>
  <div ng-if="viewTable" class="row table-cont">
    <div class="col-sm-12 grid-cont">
      <div class="gridStyle" ng-grid="gridOptions" >
        <div class="grid-overlay-msg" ng-hide="gridOptions.data.length && !loading">
          <div class="msg">
            <span>Loading Data...
            <i class="fa fa-spinner fa-spin"></i></span>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>